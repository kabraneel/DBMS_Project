CREATE TABLE Buys(P_id Integer NOT NULL, Pres_id Integer NOT NULL, Drug_id Integer NOT NULL, PRIMARY KEY(P_id, Pres_id, Drug_id), FOREIGN KEY (P_id) REFERENCES Patient(P_id), FOREIGN KEY (Pres_id) REFERENCES Prescription(Pres_id), FOREIGN KEY (Drug_id) REFERENCES DrugStore(Drug_id));
CREATE TABLE Takes(Test_id Integer NOT NULL, P_id Integer NOT NULL, Pres_id Integer NOT NULL, DateOfTest date default (current_date) not null, PRIMARY KEY(Test_id, P_id, Pres_id), FOREIGN KEY (Test_id) REFERENCES Test(Test_id), FOREIGN KEY (P_id) REFERENCES Patient(P_id), FOREIGN KEY (Pres_id) REFERENCES Prescription(Pres_id));
CREATE TABLE Prescribes(P_id Integer NOT NULL, Dr_id Integer NOT NULL, Pres_id Integer NOT NULL, PRIMARY KEY(P_id, Dr_id, Pres_id), FOREIGN KEY (P_id) REFERENCES Patient(P_id), FOREIGN KEY (Dr_id) REFERENCES Doctor(Dr_id), FOREIGN KEY (Pres_id) REFERENCES Prescription(Pres_id));
CREATE TABLE ReportTo(N_id Integer NOT NULL, Dr_id Integer NOT NULL, PRIMARY KEY(N_id, Dr_id), FOREIGN KEY (N_id) REFERENCES Nurse(N_id), FOREIGN KEY (Dr_id) REFERENCES Doctor(Dr_id));
create table BelongsTo (Dr_id Integer Not null, Dept_id Integer Not null, Foreign Key(Dr_id) references Doctor(Dr_id), Foreign Key(Dept_id) references Department(Dept_id), Primary Key(Dr_id, Dept_id));
create table isOf (Op_id Integer Not null, Dept_id Integer Not null, Foreign Key(Op_id) references Operations(Op_id), Foreign Key(Dept_id) references Department(Dept_id), Primary Key(Op_id, Dept_id));    
create table TakesAppoints(P_id Integer Not null, Dr_id Integer Not null, DateOfApp date not null, Foreign Key(P_id) references Patient(P_id), Foreign Key(Dr_id) references Doctor(Dr_id), Primary Key(P_id, Dr_id));
create table OT (Pres_id Integer Not null, P_id Integer Not null, Op_id Integer Not null, DateOfOp date not null, RoomNumber Integer not null check (RoomNumber >= 1 and RoomNumber <= 50), Foreign Key(Pres_id) references Prescription(Pres_id), Foreign Key(P_id) references Patient(P_id), Foreign Key(Op_id) references Operations(Op_id), Unique (DateOfOp, RoomNumber), Primary Key(Pres_id, P_id, Op_id));
